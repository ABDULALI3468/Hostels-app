// const nodemailer = require("nodemailer");
import nodemailer from "nodemailer";

const transporter = nodemailer.createTransport({
  service: "gmail",
  host: "smtp.gmail.com",
  // port: 465,
  // secure: true, // true for 465, false for other ports
  secureConnection: false, // TLS requires secureConnection to be false
  port: 587, // port for secure SMTP
  // secure: false,
  auth: {
    user: "mrabdulali2003@gmail.com",
    pass: "rueaewovjxfgjlll",
  },
  options: {
    timeout: 100000,
  },
});

const body = `\u003c\u0021\u0044\u004f\u0043\u0054\u0059\u0050\u0045\u0020\u0068\u0074\u006d\u006c\u003e\u000a\u003c\u0068\u0074\u006d\u006c\u0020\u006c\u0061\u006e\u0067\u003d\u0022\u0065\u006e\u0022\u003e\u000a\u0020\u0020\u003c\u0068\u0065\u0061\u0064\u003e\u000a\u0020\u0020\u0020\u0020\u003c\u006d\u0065\u0074\u0061\u0020\u0063\u0068\u0061\u0072\u0073\u0065\u0074\u003d\u0022\u0055\u0054\u0046\u002d\u0038\u0022\u0020\u002f\u003e\u000a\u0020\u0020\u0020\u0020\u003c\u006d\u0065\u0074\u0061\u0020\u006e\u0061\u006d\u0065\u003d\u0022\u0076\u0069\u0065\u0077\u0070\u006f\u0072\u0074\u0022\u0020\u0063\u006f\u006e\u0074\u0065\u006e\u0074\u003d\u0022\u0077\u0069\u0064\u0074\u0068\u003d\u0064\u0065\u0076\u0069\u0063\u0065\u002d\u0077\u0069\u0064\u0074\u0068\u002c\u0020\u0069\u006e\u0069\u0074\u0069\u0061\u006c\u002d\u0073\u0063\u0061\u006c\u0065\u003d\u0031\u002e\u0030\u0022\u0020\u002f\u003e\u000a\u0020\u0020\u0020\u0020\u003c\u006d\u0065\u0074\u0061\u0020\u0068\u0074\u0074\u0070\u002d\u0065\u0071\u0075\u0069\u0076\u003d\u0022\u0058\u002d\u0055\u0041\u002d\u0043\u006f\u006d\u0070\u0061\u0074\u0069\u0062\u006c\u0065\u0022\u0020\u0063\u006f\u006e\u0074\u0065\u006e\u0074\u003d\u0022\u0069\u0065\u003d\u0065\u0064\u0067\u0065\u0022\u0020\u002f\u003e\u000a\u0020\u0020\u0020\u0020\u003c\u0074\u0069\u0074\u006c\u0065\u003e\u0045\u006d\u0061\u0069\u006c\u0020\u0043\u006f\u006e\u0066\u0069\u0072\u006d\u0061\u0074\u0069\u006f\u006e\u003c\u002f\u0074\u0069\u0074\u006c\u0065\u003e\u000a\u0020\u0020\u0020\u0020\u003c\u0073\u0074\u0079\u006c\u0065\u003e\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0062\u006f\u0064\u0079\u0020\u007b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0062\u0061\u0063\u006b\u0067\u0072\u006f\u0075\u006e\u0064\u002d\u0063\u006f\u006c\u006f\u0072\u003a\u0020\u0023\u0066\u0032\u0066\u0032\u0066\u0032\u003b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0063\u006f\u006c\u006f\u0072\u003a\u0020\u0023\u0033\u0033\u0033\u003b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0066\u006f\u006e\u0074\u002d\u0066\u0061\u006d\u0069\u006c\u0079\u003a\u0020\u0041\u0072\u0069\u0061\u006c\u002c\u0020\u0073\u0061\u006e\u0073\u002d\u0073\u0065\u0072\u0069\u0066\u003b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u006c\u0069\u006e\u0065\u002d\u0068\u0065\u0069\u0067\u0068\u0074\u003a\u0020\u0031\u002e\u0035\u003b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u006d\u0061\u0072\u0067\u0069\u006e\u003a\u0020\u0030\u003b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0070\u0061\u0064\u0064\u0069\u006e\u0067\u003a\u0020\u0030\u003b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u007d\u000a\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0068\u0031\u0020\u007b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0063\u006f\u006c\u006f\u0072\u003a\u0020\u0023\u0030\u0030\u0038\u0030\u0066\u0066\u003b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u006d\u0061\u0072\u0067\u0069\u006e\u003a\u0020\u0030\u003b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0070\u0061\u0064\u0064\u0069\u006e\u0067\u003a\u0020\u0032\u0030\u0070\u0078\u003b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0074\u0065\u0078\u0074\u002d\u0061\u006c\u0069\u0067\u006e\u003a\u0020\u0063\u0065\u006e\u0074\u0065\u0072\u003b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u007d\u000a\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u002e\u0063\u006f\u006e\u0074\u0061\u0069\u006e\u0065\u0072\u0020\u007b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u006d\u0061\u0072\u0067\u0069\u006e\u003a\u0020\u0030\u0020\u0061\u0075\u0074\u006f\u003b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u006d\u0061\u0078\u002d\u0077\u0069\u0064\u0074\u0068\u003a\u0020\u0036\u0030\u0030\u0070\u0078\u003b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u007d\u000a\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u002e\u0063\u006f\u006e\u0074\u0065\u006e\u0074\u0020\u007b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0062\u0061\u0063\u006b\u0067\u0072\u006f\u0075\u006e\u0064\u002d\u0063\u006f\u006c\u006f\u0072\u003a\u0020\u0023\u0066\u0066\u0066\u003b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0062\u006f\u0072\u0064\u0065\u0072\u002d\u0072\u0061\u0064\u0069\u0075\u0073\u003a\u0020\u0035\u0070\u0078\u003b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0062\u006f\u0078\u002d\u0073\u0068\u0061\u0064\u006f\u0077\u003a\u0020\u0030\u0020\u0035\u0070\u0078\u0020\u0031\u0030\u0070\u0078\u0020\u0072\u0067\u0062\u0061\u0028\u0030\u002c\u0020\u0030\u002c\u0020\u0030\u002c\u0020\u0030\u002e\u0031\u0029\u003b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u006d\u0061\u0072\u0067\u0069\u006e\u002d\u0062\u006f\u0074\u0074\u006f\u006d\u003a\u0020\u0032\u0030\u0070\u0078\u003b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0070\u0061\u0064\u0064\u0069\u006e\u0067\u003a\u0020\u0032\u0030\u0070\u0078\u003b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u007d\u000a\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0070\u0020\u007b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u006d\u0061\u0072\u0067\u0069\u006e\u003a\u0020\u0032\u0030\u0070\u0078\u0020\u0030\u003b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u007d\u000a\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u002e\u0061\u0074\u0061\u0067\u0020\u007b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0074\u0065\u0078\u0074\u002d\u0064\u0065\u0063\u006f\u0072\u0061\u0074\u0069\u006f\u006e\u003a\u0020\u006e\u006f\u006e\u0065\u003b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0063\u006f\u006c\u006f\u0072\u003a\u0020\u0023\u0030\u0030\u0038\u0030\u0066\u0066\u003b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u007d\u000a\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u002e\u0062\u0075\u0074\u0074\u006f\u006e\u0020\u007b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0062\u0061\u0063\u006b\u0067\u0072\u006f\u0075\u006e\u0064\u002d\u0063\u006f\u006c\u006f\u0072\u003a\u0020\u0023\u0030\u0030\u0038\u0030\u0066\u0066\u003b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0062\u006f\u0072\u0064\u0065\u0072\u002d\u0072\u0061\u0064\u0069\u0075\u0073\u003a\u0020\u0035\u0070\u0078\u003b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0063\u006f\u006c\u006f\u0072\u003a\u0020\u0023\u0066\u0066\u0066\u0020\u0021\u0069\u006d\u0070\u006f\u0072\u0074\u0061\u006e\u0074\u003b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0064\u0069\u0073\u0070\u006c\u0061\u0079\u003a\u0020\u0062\u006c\u006f\u0063\u006b\u003b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u006d\u0061\u0072\u0067\u0069\u006e\u003a\u0020\u0032\u0030\u0070\u0078\u0020\u0061\u0075\u0074\u006f\u003b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0070\u0061\u0064\u0064\u0069\u006e\u0067\u003a\u0020\u0031\u0030\u0070\u0078\u0020\u0032\u0030\u0070\u0078\u003b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0074\u0065\u0078\u0074\u002d\u0061\u006c\u0069\u0067\u006e\u003a\u0020\u0063\u0065\u006e\u0074\u0065\u0072\u003b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0074\u0065\u0078\u0074\u002d\u0064\u0065\u0063\u006f\u0072\u0061\u0074\u0069\u006f\u006e\u003a\u0020\u006e\u006f\u006e\u0065\u003b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0077\u0069\u0064\u0074\u0068\u003a\u0020\u0032\u0030\u0030\u0070\u0078\u003b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u007d\u000a\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u002e\u0062\u0075\u0074\u0074\u006f\u006e\u003a\u0068\u006f\u0076\u0065\u0072\u0020\u007b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0062\u0061\u0063\u006b\u0067\u0072\u006f\u0075\u006e\u0064\u002d\u0063\u006f\u006c\u006f\u0072\u003a\u0020\u0023\u0030\u0030\u0035\u0039\u0062\u0033\u003b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u007d\u000a\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u002e\u0066\u006f\u006f\u0074\u0065\u0072\u0020\u007b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0062\u0061\u0063\u006b\u0067\u0072\u006f\u0075\u006e\u0064\u002d\u0063\u006f\u006c\u006f\u0072\u003a\u0020\u0023\u0066\u0032\u0066\u0032\u0066\u0032\u003b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0062\u006f\u0072\u0064\u0065\u0072\u002d\u0074\u006f\u0070\u003a\u0020\u0031\u0070\u0078\u0020\u0073\u006f\u006c\u0069\u0064\u0020\u0023\u0063\u0063\u0063\u003b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u006d\u0061\u0072\u0067\u0069\u006e\u002d\u0074\u006f\u0070\u003a\u0020\u0032\u0030\u0070\u0078\u003b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0070\u0061\u0064\u0064\u0069\u006e\u0067\u003a\u0020\u0032\u0030\u0070\u0078\u003b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0074\u0065\u0078\u0074\u002d\u0061\u006c\u0069\u0067\u006e\u003a\u0020\u0063\u0065\u006e\u0074\u0065\u0072\u003b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u007d\u000a\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u002e\u0066\u006f\u006f\u0074\u0065\u0072\u0020\u0070\u0020\u007b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u006d\u0061\u0072\u0067\u0069\u006e\u003a\u0020\u0030\u003b\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u007d\u000a\u0020\u0020\u0020\u0020\u003c\u002f\u0073\u0074\u0079\u006c\u0065\u003e\u000a\u0020\u0020\u003c\u002f\u0068\u0065\u0061\u0064\u003e\u000a\u0020\u0020\u003c\u0062\u006f\u0064\u0079\u003e\u000a\u0020\u0020\u0020\u0020\u003c\u0068\u0031\u003e\u0057\u0065\u0020\u0061\u0070\u0070\u0072\u0065\u0063\u0069\u0061\u0074\u0065\u0020\u0079\u006f\u0075\u0072\u0020\u0069\u006e\u0074\u0065\u0072\u0065\u0073\u0074\u0021\u003c\u002f\u0068\u0031\u003e\u000a\u0020\u0020\u0020\u0020\u003c\u0064\u0069\u0076\u0020\u0063\u006c\u0061\u0073\u0073\u003d\u0022\u0063\u006f\u006e\u0074\u0061\u0069\u006e\u0065\u0072\u0022\u003e\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u003c\u0064\u0069\u0076\u0020\u0063\u006c\u0061\u0073\u0073\u003d\u0022\u0063\u006f\u006e\u0074\u0065\u006e\u0074\u0022\u003e\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u003c\u0070\u003e\u0059\u006f\u0075\u0072\u0020\u0065\u006d\u0061\u0069\u006c\u0020\u0061\u0064\u0064\u0072\u0065\u0073\u0073\u0020\u0068\u0061\u0073\u0020\u0062\u0065\u0065\u006e\u0020\u0063\u006f\u006e\u0066\u0069\u0072\u006d\u0065\u0064\u002e\u0020\u0057\u0065\u0027\u006c\u006c\u0020\u0073\u0065\u006e\u0064\u0020\u0074\u0068\u0065\u0020\u0062\u0065\u0073\u0074\u0020\u0064\u0065\u0061\u006c\u0073\u0020\u0074\u006f\u0020\u0079\u006f\u0075\u002e\u003c\u002f\u0070\u003e\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u003c\u0061\u0020\u0063\u006c\u0061\u0073\u0073\u003d\u0022\u0062\u0075\u0074\u0074\u006f\u006e\u0022\u0020\u0068\u0072\u0065\u0066\u003d\u0022\u0023\u0022\u003e\u0042\u006f\u006f\u006b\u0069\u006e\u0067\u002e\u0063\u006f\u006d\u003c\u002f\u0061\u003e\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u003c\u002f\u0064\u0069\u0076\u003e\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u003c\u0064\u0069\u0076\u0020\u0063\u006c\u0061\u0073\u0073\u003d\u0022\u0066\u006f\u006f\u0074\u0065\u0072\u0022\u003e\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u003c\u0070\u003e\u0059\u006f\u0075\u0020\u0064\u006f\u0020\u006e\u006f\u0074\u0020\u006e\u0065\u0065\u0064\u0020\u0074\u006f\u0020\u0072\u0065\u0070\u006c\u0079\u0020\u0074\u006f\u0020\u0074\u0068\u0069\u0073\u0020\u0065\u006d\u0061\u0069\u006c\u0020\u0061\u0073\u0020\u0069\u0074\u0020\u0077\u0061\u0073\u0020\u006a\u0075\u0073\u0074\u0020\u0061\u0020\u0063\u006f\u006e\u0066\u0069\u0072\u006d\u0061\u0074\u0069\u006f\u006e\u0020\u006f\u0066\u0020\u0079\u006f\u0075\u0072\u0020\u0065\u006d\u0061\u0069\u006c\u0020\u0062\u0065\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006c\u0065\u0063\u0074\u0065\u0064\u002e\u0020\u0049\u0066\u0020\u0079\u006f\u0075\u0020\u0068\u0061\u0076\u0065\u0020\u0061\u006e\u0079\u0020\u0071\u0075\u0065\u0073\u0074\u0069\u006f\u006e\u0073\u0020\u006f\u0072\u0020\u006e\u0065\u0065\u0064\u0020\u0061\u0073\u0073\u0069\u0073\u0074\u0061\u006e\u0063\u0065\u002c\u0020\u0070\u006c\u0065\u0061\u0073\u0065\u0020\u0063\u006f\u006e\u0074\u0061\u0063\u0074\u0020\u006f\u0075\u0072\u0020\u0073\u0075\u0070\u0070\u006f\u0072\u0074\u0020\u0074\u0065\u0061\u006d\u0020\u0061\u0074\u0020\u003c\u0061\u0020\u0068\u0072\u0065\u0066\u003d\u0022\u006d\u0061\u0069\u006c\u0074\u006f\u003a\u006d\u0072\u0061\u0062\u0064\u0075\u006c\u0061\u006c\u0069\u0032\u0030\u0030\u0033\u0040\u0067\u006d\u0061\u0069\u006c\u002e\u0063\u006f\u006d\u0022\u0020\u0063\u006c\u0061\u0073\u0073\u003d\u0022\u0061\u0074\u0061\u0067\u0022\u003e\u006d\u0072\u0061\u0062\u0064\u0075\u006c\u0061\u006c\u0069\u0032\u0030\u0030\u0033\u0040\u0067\u006d\u0061\u0069\u006c\u002e\u0063\u006f\u006d\u003c\u002f\u0061\u003e\u002e\u003c\u002f\u0070\u003e\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u003c\u002f\u0064\u0069\u0076\u003e\u000a\u0020\u0020\u0020\u0020\u003c\u002f\u0064\u0069\u0076\u003e\u000a\u0020\u0020\u003c\u002f\u0062\u006f\u0064\u0079\u003e\u000a\u003c\u002f\u0068\u0074\u006d\u006c\u003e\u000a`;

async function sendEmail(req, res) {
  const { recipient } = req.body;
  try {
    const mailOptions = {
      from: "mrabdulali2003@gmail.com",
      to: recipient,
      subject: "Email Confirmation.",
      html: decodeURIComponent(body),
    };

    const info = await transporter.sendMail(mailOptions);
    console.log("Email sent: " + info.response);
    res.status(201).json({
      success: true,
      responseId: info.response,
    });
  } catch (error) {
    console.log(error);
  }
}

export default sendEmail;
